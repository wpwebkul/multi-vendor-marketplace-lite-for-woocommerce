(()=>{"use strict";var e=jQuery.noConflict();document.addEventListener("DOMContentLoaded",(function(){e(".wkmp-select2").length&&e(".wkmp-select2").select2(),e("#mp_seller_product_categories").length&&(e("#mp_seller_product_categories").select2(),e(".wc-product-search").select2()),e("#new_zone_locations").length&&e("#new_zone_locations").select2()})),e(window).on("load",(function(){e(".add-product-form .select2-container").css("width","100%"),e(".wkmp_nav_tabs a").css("text-decoration","none"),e(".woocommerce-pagination a").css("text-decoration","none"),wp.hasOwnProperty("media")&&(wp.media.model.settings.post.id=0),e(".woocommerce-MyAccount-navigation .woocommerce-MyAccount-navigation-link").length>0&&void 0!==wkmpObj.mkt_tr.separate_dashboard&&e(".woocommerce-MyAccount-navigation-link--"+wkmpObj.mkt_tr.separate_dashboard).length>0&&(e(".woocommerce-MyAccount-navigation-link--"+wkmpObj.mkt_tr.separate_dashboard+" a").attr("href","javascript:void(0);"),e(".woocommerce-MyAccount-navigation-link--"+wkmpObj.mkt_tr.separate_dashboard+" a").on("click",(function(t){t.preventDefault(),e(".woocommerce-MyAccount-navigation-link--separate-dashboard").addClass("loading"),e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_change_frontend_seller_dashboard",change_to:"backend_dashboard",wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(e){e&&(window.location.href=e.redirect)}})}))),e(document).on("click","#wk_stock_management",(function(){e(this).is(":checked")?(e(".wkmp_profile_input #wk-mp-stock-qty").parent(".wkmp_profile_input").css("display","block"),e(".wkmp_profile_input #_backorders").parent(".wkmp_profile_input").css("display","block"),e(".wkmp_profile_input #wk-mp-stock-threshold").parent(".wkmp_profile_input").css("display","block")):(e(".wkmp_profile_input #wk-mp-stock-qty").parent(".wkmp_profile_input").css("display","none"),e(".wkmp_profile_input #_backorders").parent(".wkmp_profile_input").css("display","none"),e(".wkmp_profile_input #wk-mp-stock-threshold").parent(".wkmp_profile_input").css("display","none"))})),e(".mp-avg-rating-box-link").on("click",(function(t){t.stopPropagation(),e(t.target).hasClass("mp-avg-rating-box-link")&&(e(".mp-avg-rating-box").toggle(),e(this).toggleClass("open"))})),e("body").on("click",(function(t){e(".mp-avg-rating-box-link").hasClass("open")&&(e(".mp-avg-rating-box-link").removeClass("open"),e(".mp-avg-rating-box").toggle())})),e("body").on("click",".mp-seller-review-form p.mp-star-rating a",(function(){var t=e(this).data("type"),a=e(this),i=e(this).closest(".mp-star-rating").siblings("#feed-"+t+"-rating"),n=e(this).closest(".mp-star-rating");return i.val(a.data("rate")),a.siblings("a").removeClass("active"),a.addClass("active"),n.addClass("selected"),!1}))})),e((function(){var t;e(".wkmp-role-selector").length&&e(".wkmp-role-selector li").on("click",(function(t){var a=e(this);a.addClass("active").siblings().removeClass("active"),a.children("input[type=radio]").prop("checked",!0),1==a.data("target")?(e(".wkmp-show-fields-if-seller").slideDown(),e(".wkmp-show-fields-if-seller").find(":input").removeAttr("disabled")):(e(".wkmp-show-fields-if-seller").find(":input").attr("disabled","disabled"),e(".wkmp-show-fields-if-seller").slideUp())})),e("#wkmp-shopname").length&&(e("#wkmp-shopname").on("focusout",(function(t){e(this).next(".wkmp-error").remove();var a=e(this).val().toLowerCase().replace(/-+/g,"").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");e("#wkmp-shopurl").val(a)})),e("#wkmp-shopurl").on("focusout",(function(){var t=e(this);e(t).next(".wkmp-error").remove();var a=t.val();if(""===a)return!1;e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_check_shop_url",shop_slug:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){!1===t.error?e("#wkmp-shop-url-availability").removeClass("wkmp-text-danger").addClass("wkmp-text-success").text(t.message):e("#wkmp-shop-url-availability").removeClass("wkmp-text-success").addClass("wkmp-text-danger").text(t.message)}})}))),e(".woocommerce-form-register").length&&e("form.woocommerce-form-register").on("submit",(function(t){if(e(".wkmp-error").remove(),"seller"===e("input[name=role]:checked").val()){var a=e(this).find("input"),i=wp.template("wkmp_field_empty");e.each(a,(function(a,n){var r=n.name;"wkmp_seller_signup_term_accept"===r&&(e(n).is(":checked")?e(n).val("yes"):e(n).val("")),!e(n).attr("data-is_optional")&&""===e(n).val()&&(r.indexOf("wkmp_")>-1||"email"===r)&&(t.preventDefault(),"wkmp_seller_signup_term_accept"===r?e(e(n)[0]).parent().after(i()):e(e(n)[0]).after(i()))}))}})),e(".wkmp_nav_tabs li a:not(:first)").addClass("inactive"),e(".wkmp_tab_content .wkmp_tab_pane:not(:first)").addClass("wkmp_hide"),e(".wkmp_nav_tabs li a").on("click",(function(){e(".wkmp_nav_tabs li a").removeClass("active").addClass("inactive"),e(this).removeClass("inactive").addClass("active");var t=e(this).data("id");e(".wkmp_tab_content .wkmp_tab_pane").removeClass("wkmp_show").addClass("wkmp_hide"),e(".wkmp_tab_content ".concat(t)).removeClass("wkmp_hide").addClass("wkmp_show")})),e(".wkmp_nav_tabs li a").each((function(){"yes"===e(this).attr("data-current_tab")&&e(this).trigger("click")})),e(document).on("click","#mp_var_attribute_call",(function(t){t.preventDefault();var a=e("#sell_pr_id").val();e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_marketplace_attributes_variation",product:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},beforeSend:function(){e("#mp-loader").css("display","block")},success:function(t){e("#mp-loader").css("display","none"),e("#mp_attribute_variations").append(t)}})})),e("body").on("click","#wkmp-ask-query",(function(){var t=e(this).data("modal_src");e(t).css("display","block")})),e("body").on("click",".wkmp-popup-modal .modal-footer .close-modal",(function(){e(this).parents(".wkmp-popup-modal").css("display","none")})),e("body").on("click","#wkmp-upload-profile-image",(function(){e("#seller_avatar_file").trigger("click")})),e("body").on("change","#seller_avatar_file",(function(){var t=new FileReader;t.onload=function(t){e(".wkmp_profile_img #wkmp-thumb-image img").attr("src",t.target.result)},t.readAsDataURL(this.files[0])})),e("body").on("click",".wkmp_profile_img .wkmp-remove-profile-image",(function(){var t=e(this).parents(".wkmp_profile_img").find("#wkmp-thumb-image img").data("placeholder-url");e(this).parents(".wkmp_profile_img").find("#wkmp-thumb-image img").attr("src",t),e(this).parents(".wkmp_profile_img").find("#thumbnail_id_avatar").val("")})),e("body").on("click","#wkmp-upload-shop-logo",(function(){e("#seller_shop_logo_file").trigger("click")})),e("body").on("change","#seller_shop_logo_file",(function(){var t=new FileReader;t.onload=function(t){e(".wkmp_profile_logo #wkmp-thumb-image img").attr("src",t.target.result)},t.readAsDataURL(this.files[0])})),e("body").on("click",".wkmp_profile_logo .wkmp-remove-shop-logo",(function(){var t=e(this).parents(".wkmp_profile_logo").find("#wkmp-thumb-image img").data("placeholder-url");e(this).parents(".wkmp_profile_logo").find("#wkmp-thumb-image img").attr("src",t),e(this).parents(".wkmp_profile_logo").find("#thumbnail_id_company_logo").val("")})),e("body").on("click","#wkmp-upload-seller-banner",(function(){e("#wk_mp_shop_banner").trigger("click")})),e("body").on("change","#wk_mp_shop_banner",(function(){var t=new FileReader;t.onload=function(t){e(".wkmp_shop_banner img").attr("src",t.target.result)},t.readAsDataURL(this.files[0])})),e("body").on("click",".wkmp_shop_banner #wkmp-remove-seller-banner",(function(){var t=e(this).parents(".wkmp_shop_banner").find("#wk_seller_banner img").data("placeholder-url");e(this).parents(".wkmp_shop_banner").find("#wk_seller_banner img").attr("src",t),e(this).parents(".wkmp_shop_banner").find("#thumbnail_id_shop_banner").val("")})),e("body").on("click","#wkmp-checked-all",(function(){1==e(this).prop("checked")?e("input[name*='selected']").prop("checked",!0):e("input[name*='selected']").prop("checked",!1)})),e(".wkmp-table-responsive table tbody td input[type=checkbox]").on("click",(function(){var t=e(".wkmp-table-responsive table tbody td input[type=checkbox]:checked").length;e(".wkmp-table-responsive table tbody td input[type=checkbox]").length===t?e("#wkmp-checked-all").prop("checked",!0):e("#wkmp-checked-all").prop("checked",!1)})),e("body").on("click",".wkmp-bulk-delete",(function(){var t=e(this).data("form_id"),a=!1;e("".concat(t," input[type='checkbox']")).each((function(){e(this).is(":checked")&&e(this).val()>0&&(a=!0)})),a?confirm(wkmpObj.delete_product_alert)&&e(t).submit():alert(wkmpObj.none_selected)})),e("body").on("click","#wkmp_delete_single_fav_seller",(function(){confirm(wkmpObj.delete_fav_seller_alert)&&(e(this).closest("tr").children("td:first").find("input[type=checkbox]").prop("checked",!0),e(this).closest("form").submit())})),e("body").on("click","#wkmp-send-notification",(function(){var t=[];if(e("#wkmp-followers-list input[type='checkbox']").each((function(){e(this).is(":checked")&&t.push(e(this).val())})),"on"===t[0]&&t.shift(),t.length>=1){for(var a=0;a<t.length;a++)e("#wkmp-seller-send-notification #wkmp-seller-sendmail-form").append('<input type="hidden" name="customer_ids[]" value="'.concat(t[a],'"/>'));e("#wkmp-seller-send-notification").css("display","block")}else alert(wkmpObj.none_selected)})),e("body").on("click","#wkmp-add-seller-as-favourite",(function(){var t=e(this).find('input[name="wkmp_seller_id"]').val(),a=e(this).find('input[name="wkmp_customer_id"]').val();e(".wkmp-spin-loader").removeClass("wkmp_hide"),e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_add_favourite_seller",seller_id:t,customer_id:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){e(".wkmp-spin-loader").addClass("wkmp_hide"),"added"===t.success&&e("#wkmp-add-seller-as-favourite .dashicons-heart").css("color","#96588a"),"removed"===t.success&&e("#wkmp-add-seller-as-favourite .dashicons-heart").css("color","unset"),e(".woocommerce .wkmp-confirmation-msg").html(t.message).css("display","block"),setTimeout((function(){e(".woocommerce .wkmp-confirmation-msg").css("display","none")}),3e3)}})})),e("body").on("click",".mp-rating-input .stars a",(function(){var t=e(this).parents(".mp-rating-input"),a=e(this).text();t.find(".stars").find("a").removeClass("active"),t.find(".stars").addClass("selected"),t.find(".stars").find(".star-".concat(a)).addClass("active");var i=t.data("id");e("".concat(i," option:selected")).removeAttr("selected"),e("".concat(i," option:eq(").concat(a,")")).attr("selected","selected")})),e("#mp-update-sale-order").on("change",(function(t){t.preventDefault(),e(window).scrollTop(0),e("body").append("<div class=wk-mp-loader><div class=wk-mp-spinner wk-mp-skeleton></div></div>"),e(".wk-mp-loader").css("display","inline-block"),e("body").css("overflow","hidden"),setTimeout((function(){e("body").css("overflow","auto"),e(".wk-mp-loader").remove()}),1500)})),e("#wkmp-seller-profile #billing-country").on("change",(function(t){var a=e(this).val();e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_get_state_by_country_code",country_code:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){t.success&&e("#wkmp-seller-profile #wkmp_shop_state").replaceWith(t.html)}})})),e(".wk-mp-side-body").on("click",".upload_downloadable_file",(function(a){var i,n=e(this);if(t=n.closest("tr").find("td.file_url input"),a.preventDefault(),i)i.open();else{(i=wp.media.frames.file_frame=wp.media({title:n.data("choose"),button:{text:n.data("update")},multiple:!1})).on("open",(function(){i.state().get("selection")}));var r=wp.media.query();r.filterWithIds=function(e){return _(this.models.filter((function(t){return _.contains(e,t.id)})))},r.filterWithIds([3]).each((function(e){console.log(e.toJSON())})),i.on("select",(function(){var e="";i.state().get("selection").map((function(a){return(a=a.toJSON()).url&&(e=a.url),t.val(e).change(),a.id}))})),i.open()}})),e(".select-group .dropdown-togle").on("click",(function(){e(this).parent().toggleClass("open")})),e(".wkmp-order-refund-button").on("click",(function(t){e(".wkmp-order-refund").toggle(),"table-cell"===e(".wkmp-order-refund").css("display")?e(t.target).text("Cancel"):e(t.target).text("Refund")})),e(".refund_line_total")&&e(".refund_line_total").on("change",(function(e){var t=0;document.querySelectorAll(".refund_line_total").forEach((function(e){var a=0;("checkbox"===e.type&&e.checked||"checkbox"!==e.type)&&(a=e.value),t+=a*e.previousElementSibling.value})),document.querySelector("#refund-amount").value=Math.round(100*t)/100})),e(document).on("click","#wk_stock_management",(function(){e(this).is(":checked")?(e(".wkmp_profile_input #wk-mp-stock-qty").parent(".wkmp_profile_input").css("display","block"),e(".wkmp_profile_input #_backorders").parent(".wkmp_profile_input").css("display","block"),e(".wkmp_profile_input #_stock_status").parent(".wkmp_profile_input").css("display","none")):(e(".wkmp_profile_input #wk-mp-stock-qty").parent(".wkmp_profile_input").css("display","none"),e(".wkmp_profile_input #_backorders").parent(".wkmp_profile_input").css("display","none"),e(".wkmp_profile_input #_stock_status").parent(".wkmp_profile_input").css("display","block"))})),e(".wkmp-toggle-select").on("change",(function(){var t=e(this).val();"publish"===t?e(".mp-toggle-selected-display").html(wkmpObj.mkt_tr.mkt28).addClass("green"):e(".mp-toggle-selected-display").html(t).removeClass("green")})),e("#wkmp_product_status_checkbox_wrap label").on("click",(function(){e(this).children(".wkmp-toggle-select").trigger("change").prop("checked",!0)}));var a=e("#product_type").val(),i=e("#var_variation_display").val();"variable"===a&&"yes"===i&&e("#edit_product_tab li").eq(6).show(),"external"===a&&e("#edit_product_tab li").eq(5).show(),e(document).on("change","body #product_type",(function(){var t=e("#product_type").val(),a=e("#var_variation_display").val();"variable"===t&&"yes"===a?e("#edit_product_tab li").eq(6).show():e("#edit_product_tab li").eq(6).hide(),"simple"===t?(e("#regularPrice").show(),e("#salePrice").show()):(e("#regularPrice").hide(),e("#salePrice").hide()),"external"===t?e("#edit_product_tab li").eq(5).show():e("#edit_product_tab li").eq(5).hide()})),e("a.mp-toggle-type-cancel").on("click",(function(){e(".mp-toggle-select-type-container").css("display","none")})),e(".mp_value_asc").change((function(){var t=e(this).val(),a=window.location.href+"&"+t;window.location=a})),e("#_ckdownloadable").change((function(){e(".wk-mp-side-body").slideToggle("slow")})),e("#_ckvirtual").change((function(){"none"!==e("#edit_product_tab li").eq(2).css("display")?e("#edit_product_tab li").eq(2).css("display","none"):e("#edit_product_tab li").eq(2).css("display","block")})),e(".wk-mp-side-body").on("click",".downloadable_files a.insert",(function(){return e(this).closest(".downloadable_files").find("tbody").append(e(this).data("row")),!1})),e(".wk-mp-side-body").on("click",".downloadable_files a.delete",(function(){return e(this).closest("tr").remove(),!1})),e(document).on("change",".checkbox_is_virtual",(function(){e(this).parents("tbody").children("tr").eq(0).find(".virtual").slideToggle("fast")})),e(document).on("change",".checkbox_is_downloadable",(function(){e(this).parents("tbody").children("tr").eq(0).find(".downloadable").slideToggle("fast")})),e(document).on("change",".checkbox_manage_stock",(function(){e(this).parents("tbody").children("tr").eq(0).find(".wkmp_stock_status").slideToggle("fast")})),e(".add-mp-product-images").on("click",(function(t){e(this).attr("id");var a,i=e("#product_image_Galary_ids").val(),n="",r=0;e("#wk-mp-product-images").find(".error-class").remove(),n=""===i?"":i+",",t.preventDefault(),a||((a=wp.media.frames.file_frame=wp.media({title:e(this).data("uploader_title"),button:{text:e(this).data("uploader_button_text")},multiple:!0})).on("open",(function(){a.state().get("selection")})),wp.media.query().filterWithIds=function(e){return _(this.models.filter((function(t){return _.contains(e,t.id)})))},a.on("select",(function(){a.state().get("selection").map((function(t){if(void 0!==(t=t.toJSON()).sizes)return n=n+t.id+",",e("#handleFileSelectgalaray").append("<img src='"+t.sizes.thumbnail.url+"' width='50' height='50'/>"),t.id;r=1})),r&&e("#wk-mp-product-images").append("<p class=error-class>"+e(".mp_product_thumb_image.button").data("type-error")+"</p>"),n=n.replace(/,\s*$/,""),e("#product_image_Galary_ids").val(n)}))),a.open()})),e(".mp_product_thumb_image").on("click",(function(t){var a;t.preventDefault(),a||((a=wp.media.frames.file_frame=wp.media({title:e(this).data("uploader_title"),button:{text:e(this).data("uploader_button_text")},multiple:!1})).on("open",(function(){a.state().get("selection")})),wp.media.query().filterWithIds=function(e){return _(this.models.filter((function(t){return _.contains(e,t.id)})))},a.on("select",(function(){a.state().get("selection").map((function(t){if(t=t.toJSON(),e(".mp_product_thumb_image.button").siblings(".error-class").remove(),void 0!==t.sizes)return e("#product_thumb_image_mp").val(t.id),e("#mp-product-thumb-img-div").find("img").attr("src",t.sizes.thumbnail.url),e("#mp-product-thumb-img-div").find("span").length<=0&&e("#mp-product-thumb-img-div").append('<span title="'+wkmpObj.mkt_tr.mkt32+'" class="mp-image-remove-icon">x</span>'),t.id;e(".mp_product_thumb_image.button").parent().append("<p class=error-class>"+e(".mp_product_thumb_image.button").data("type-error")+"</p>")}))}))),a.open()})),e("#mp-product-thumb-img-div").on("click",".mp-image-remove-icon",(function(){e("#product_thumb_image_mp").val(""),e(this).siblings("img").attr("src",e(this).siblings("img").data("placeholder-url")),e(this).remove()})),e("#edit_product_tab li a:not(:first)").addClass("inactive"),e("#edit_notification_tab li a").length||(e(".wkmp_container").hide(),e(".wkmp_container:first").show());var n=e("#active_product_tab");if(n.val()){var r=n.val();e("#"+r).hasClass("inactive")&&(e("#edit_product_tab li a").addClass("inactive"),e("#"+r).removeClass("inactive"),e(".wkmp_container").hide(),e("#"+e("#"+r).attr("id")+"wk").fadeIn("slow"))}e("#edit_product_tab li a").click((function(){var t=e(this).attr("id");n.val(t),e(this).hasClass("inactive")&&(e("#edit_product_tab li a").addClass("inactive"),e(this).removeClass("inactive"),e(".wkmp_container").hide(),e("#"+t+"wk").fadeIn("slow"))})),e("#edit_notification_tab li a").click((function(){var t=e(this).attr("id");e(this).hasClass("inactive")&&(e("#edit_notification_tab li a").addClass("inactive"),e(this).removeClass("inactive"),e(".wkmp_container").hide(),e("#"+t+"wk").fadeIn("slow"))}));var o=e(".wk_marketplace_attributes"),s=(e(".add-variant-attribute"),e("div.wk_marketplace_attributes > div.wkmp_attributes").length);e(document).on("click",".add-variant-attribute",(function(t){if(t.preventDefault(),"variable"===e("#sell_pr_type").val()){var a="";a+='<div class="wkmp_attributes">',a+='<div class="box-header attribute-remove">',a+='<input type="text" class="mp-attributes-name wkmp_product_input" placeholder="'+wkmpObj.mkt_tr.mkt29+'" name="pro_att['+s+'][name]" value=""/>',a+='<input type="text" class="option wkmp_product_input" title="'+wkmpObj.mkt_tr.mkt30+'" placeholder="'+wkmpObj.mkt_tr.mkt31+'" name="pro_att['+s+'][value]" />',a+='<input type="hidden" name="pro_att['+s+'][position]" class="attribute_position" value="1"/>',a+='<span class="mp_actions">',a+='<button class="mp_attribute_remove btn btn-danger" type="button">'+wkmpObj.mkt_tr.mkt32+"</button>",a+="</span>",a+="</div>",a+='<div class="box-inside clearfix">',a+='<div class="wk-mp-attribute-config">',a+='<div class="wkmp-checkbox-inline">',a+='<input type="checkbox" class="checkbox" name="pro_att['+s+'][is_visible]" id="is_visible_page'+s+'" value="1"/>',a+='<label for="is_visible_page'+s+'">'+wkmpObj.mkt_tr.mkt33+"</label>",a+="</div>",a+='<div class="wkmp-checkbox-inline">',a+='<input type="checkbox" class="checkbox" name="pro_att['+s+'][is_variation]" id="product_att_varition_'+s+'" value="1"/>',a+='<label for="product_att_varition_'+s+'">'+wkmpObj.mkt_tr.mkt34+"</label>",a+="</div>",a+='<input type="hidden" name="pro_att['+s+'][is_taxonomy]" value="0"/>',a+="</div>",a+='<div class="attribute-options"></div>',a+="</div>",a+="</div>",e(o).append(a)}else a="",a+='<div class="wkmp_attributes">',a+='<div class="box-header attribute-remove">',a+='<input type="text" class="mp-attributes-name wkmp_product_input" placeholder="'+wkmpObj.mkt_tr.mkt29+'" name="pro_att['+s+'][name]" value=""/>',a+='<input type="text" class="option wkmp_product_input" title="'+wkmpObj.mkt_tr.mkt30+'" placeholder="'+wkmpObj.mkt_tr.mkt31+'" name="pro_att['+s+'][value]" />',a+='<input type="hidden" name="pro_att['+s+'][position]" class="attribute_position" value="1"/>',a+='<span class="mp_actions">',a+='<button class="mp_attribute_remove btn btn-danger" type="button">'+wkmpObj.mkt_tr.mkt32+"</button>",a+="</span>",a+="</div>",a+='<div class="box-inside clearfix">',a+='<div class="wk-mp-attribute-config">',a+='<div class="wkmp-checkbox-inline">',a+='<input type="checkbox" class="checkbox" name="pro_att['+s+'][is_visible]" id="is_visible_page'+s+'" value="1"/>',a+='<label for="is_visible_page'+s+'">'+wkmpObj.mkt_tr.mkt33+"</label>",a+="</div>",a+='<input type="hidden" name="pro_att['+s+'][is_taxonomy]" value="0"/></div><div class="attribute-options">',a+="</div>",a+="</div>",a+="</div>",e(o).append(a);s++})),e(".wk_marketplace_attributes").on("click",".mp_attribute_remove",(function(t){t.preventDefault(),e(this).parent().parent().parent().remove()})),e("#mp_attribute_variations").on("click",".mp_attribute_remove",(function(t){t.preventDefault(),e(this).parent().parent().remove();var a=e(this).data("var_id");e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_attributes_variation_remove",var_id:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){e("#wkmp_remove_notice_wrap").removeClass("wkmp_hide").html(t.msg),t.success||e("#wkmp_remove_notice_wrap").addClass("woocommerce-error")}})})),e(".wkmp_variation_downloadable_file").on("click",".mp_var_del",(function(){var t=e(this).attr("id");e("#"+t).parent().parent().remove()})),e("#mp_attribute_variations").on("click",".upload_image_button",(function(){var t=e(this).attr("id")+"upload";e("#"+t).trigger("click")})),e(document).on("click","#mp_attribute_variations div.wkmp_variation_downloadable_file .wkmp_downloadable_upload_file",(function(t){t.preventDefault();var a,i="downloadable_upload_file_url_"+e(this).attr("id");if(a)a.open();else{(a=wp.media.frames.file_frame=wp.media({title:e(this).data("uploader_title"),button:{text:e(this).data("uploader_button_text")},multiple:!1})).on("open",(function(){a.state().get("selection")}));var n=wp.media.query();n.filterWithIds=function(e){return _(this.models.filter((function(t){return _.contains(e,t.id)})))},n.filterWithIds([3]).each((function(e){console.log(e.toJSON())})),a.on("select",(function(){a.state().get("selection").map((function(t){return t=t.toJSON(),e("#"+i).val(t.url),t.id}))})),a.open()}})),e("a.mp-img-delete_gal").click((function(){e("#"+this.id).parent().remove(),e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_productgallary_image_delete",img_id:this.id,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){e("#product_image_Galary_ids").val(t)}})})),e("#mp_attribute_variations").on("click",".mp_varnew_file",(function(){var t=e(this).attr("id"),a=e("div#variation_downloadable_file_"+t+" > div").length,i="#variation_downloadable_file_"+t;e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_downloadable_file_add",var_id:t,eleme_no:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){e(t).appendTo(i)}})})),e("#add_product_sub").click((function(t){if("submit"===e(this).attr("type")){var a=e("#product_name").val();m=a,a=m=e.trim(m);var i=e("#product_sku").val(),n=e("#regu_price").val(),r=0;0===a.length&&(e("#pro_name_error").html(wkmpObj.mkt_tr.mkt2),r++),void 0!==i&&""!==i&&i.length<3&&(e("#pro_sku_error").css("color","red"),e("#pro_sku_error").html(wkmpObj.mkt_tr.mkt3),r++);var o=e('input[name="product_type"]').val();""!==o&&void 0!==o||(o=e("#product_type").val()),"variable"!==o&&"grouped"!==o&&(p(n)?e("#regl_pr_error").html(""):(e("#regl_pr_error").html(wkmpObj.mkt_tr.i18n_decimal_error),r++));var s=e("#sale_price").val(),l=parseFloat(e("#regu_price").val()),c=parseFloat(e("#sale_price").val());if(e("#sale_price").val()&&(p(s)?c>l?(e("#sale_pr_error").html(wkmpObj.mkt_tr.mkt5),r++):e("#sale_pr_error").html(""):(e("#sale_pr_error").html(wkmpObj.mkt_tr.i18n_decimal_error),r++)),i=e("#product_sku").val(),e(".wkmp_variable_sku").each((function(){e(this).val()})),r)return!1}var m}));var l=e("#product_sku").val();function p(e){var t=!0;if(""!==e){var a=wkmpObj.mkt_tr.decimal_separator,i=new RegExp("[^-0-9%\\"+a+"]+","gi"),n=new RegExp("[^\\"+a+"]","gi"),r=e.replace(i,"");1<r.replace(n,"").length&&(r=r.replace(n,"")),e!==r&&(t=!1)}return t}e("#product_sku").blur((function(){var t=e("#product_sku").val();e("#pro_sku_error").html(""),t!==l&&function(t){var a=t;if(e("#pro_sku_error").css("color","red"),""!==a){if(!/^[a-z0-9A-Z_-]{1,20}$/.test(a))return e("#pro_sku_error").html("Special character and spaces are not allowed"),!1;if(a.length<3)return e("#pro_sku_error").css("color","red"),e("#pro_sku_error").html(wkmpObj.mkt_tr.mkt3),!1;e("#pro_sku_error").html(""),e("#add_product_sub").attr("disabled","disabled"),e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,dataType:"json",data:{action:"wkmp_product_sku_validation",psku:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){t&&!0===t.success?(e("#pro_sku_error").css("color","green"),e("#pro_sku_error").html(t.message),e("#add_product_sub").removeAttr("disabled")):(e("#pro_sku_error").css("color","red"),e("#pro_sku_error").html(t.message))}})}}(t)})),e(document).on("blur",".wkmp_variable_sku",(function(){var t=e(this).val();e(this).siblings(".wk_variable_sku_err").html(""),e(this).val()!==e(this).attr("placeholder")&&function(t,a){var i=t,n=a;if(e(n).siblings(".wk_variable_sku_err").css("color","red"),""===i)return e(n).siblings(".wk_variable_sku_err").html(wkmpObj.mkt_tr.mkt4),!1;/^[a-z0-9A-Z]{1,20}$/.test(i)&&e(n).siblings(".wk_variable_sku_err").html(""),e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,dataType:"json",data:{action:"wkmp_product_sku_validation",psku:i,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){if(!t||!0!==t.success)return e(n).siblings(".wk_variable_sku_err").css("color","red"),e(n).siblings(".wk_variable_sku_err").html(t.message),!1;e(n).siblings(".wk_variable_sku_err").css("color","green"),e(n).siblings(".wk_variable_sku_err").html(t.message)}})}(t,this)})),e(document).on("blur",".wc_input_price",(function(){var t=e(this).val();e(this).next(".error-class").remove(),t&&!e.isNumeric(t)&&e(this).after('<span class="error-class">'+wkmpObj.mkt_tr.i18n_decimal_error+"</span>")})),e(document).on("blur",".wc_input_decimal, #wk-mp-stock-qty",(function(){var t=e(this).val();e(this).parent(".wrap").children(".error-class").remove(),t&&!e.isNumeric(t)&&e(this).parent(".wrap").append('<span class="error-class">'+wkmpObj.mkt_tr.mkt7+"</span>")})),e(document).on("blur","._weight_field .wc_input_decimal, #wk-mp-stock-qty",(function(){var t=e(this).val();e(this).next(".error-class").remove(),t&&!e.isNumeric(t)&&e(this).after('<span class="error-class">'+wkmpObj.mkt_tr.mkt7+"</span>")})),e(document).on("keyup",".wkmp_variable_stock",(function(){var t=e(this).val(),a=t;t==t&&(a=t),""!==e(this).val()&&/^\d+(\.\d{1,2})?$/.test(a)?e(this).val(a):(e(this).val(""),a=0)})),e("#product_name").blur((function(){var t=e("#product_name").val();if(_.isEmpty(t))return e("#pro_name_error").html(wkmpObj.mkt_tr.mkt8),!1;e("#pro_name_error").html("")})),e("#regu_price").blur((function(){var t=e("#regu_price").val(),i=e("#product_type");if(a||(i=e("#product-form").find('input[name="product_type"]').val()),"variable"!==i&&"grouped"!==i&&!p(t))return e("#regl_pr_error").html(wkmpObj.mkt_tr.i18n_decimal_error),!1;e("#regl_pr_error").html("")})),e("#sale_price").blur((function(){var t=e("#sale_price").val(),i=e("#regu_price").val();i=_.isEmpty(i)?i:parseFloat(i);var n=parseFloat(e("#sale_price").val()),r=e("#product_type");if(a||(r=e("#product-form").find('input[name="product_type"]').val()),!_.isEmpty(e("#sale_price").val())&&"variable"!==r&&"grouped"!==r){if(!p(t))return e("#sale_pr_error").html(wkmpObj.mkt_tr.i18n_decimal_error),!1;if(n>=i)return e("#sale_pr_error").html(wkmpObj.mkt_tr.mkt5),!1;e("#sale_pr_error").html("")}})),e(document).on("blur",".wkmp_variable_sale_price",(function(){var t=e(this).val(),a=parseFloat(e(this).parent().siblings().children(".wkmp_variable_regular_price").val()),i=parseFloat(e(this).val());if(""!==e(this).val()){if(!p(t))return e(this).siblings(".sale_pr_error").html(wkmpObj.mkt_tr.i18n_decimal_error),!1;if(i>=a)return e(this).siblings(".sale_pr_error").html(wkmpObj.mkt_tr.mkt5),!1;e("#sale_pr_error").html("")}})),e(".wc-shipping-class-add").on("click",(function(t){var a,i="";e(".wc-shipping-class-save").removeAttr("disabled"),i+='<tr data-id="new-3-'+(a=Math.floor(1e7*Math.random()+1))+'" class="editing">',i+='<td class="wc-shipping-class-name">',i+='<div class="view" style="display:none">',i+='<div class="row-actions">',i+='<a class="wc-shipping-class-edit" href="#">Edit</a> |',i+='<a href="#" class="wc-shipping-class-delete">'+wkmpObj.mkt_tr.mkt32+"</a>",i+="</div>",i+="</div>",i+='<div class="edit" style="display:block;">',i+='<input type="text" name="name[new-3-'+a+']" data-attribute="name" value="" placeholder="'+wkmpObj.mkt_tr.ship2+'">',i+='<div class="row-actions">',i+='<a class="wc-shipping-class-cancel-edit" href="#">'+wkmpObj.mkt_tr.ship3+"</a>",i+="</div>",i+="</div>",i+="</td>",i+='<td class="wc-shipping-class-slug">',i+='<div class="edit" style="display: block;">',i+='<input type="text" name="slug[new-3-'+a+']" data-attribute="slug" value="" placeholder="'+wkmpObj.mkt_tr.ship4+'">',i+="</div>",i+="</td>",i+='<td class="wc-shipping-class-description">',i+='<div class="view" style="display: none;"></div>',i+='<div class="edit" style="display: block;">',i+='<input type="text" name="description[new-3-'+a+']" data-attribute="description" value="" placeholder="'+wkmpObj.mkt_tr.ship5+'">',i+="</div>",i+="</td>",i+='<td class="wc-shipping-class-count"><a href=""></a></td>',i+="</tr>",e("table.wc-shipping-classes tbody.wc-shipping-class-rows").append(i),t.preventDefault()})),e(".wc-shipping-classes").on("click",".wc-shipping-class-name .wc-shipping-class-edit",(function(t){e(".wc-shipping-class-save").removeAttr("disabled"),e(this).closest("tr").find(".view").hide(),e(this).closest("tr").find(".edit").show(),t.preventDefault()})),e(".wc-shipping-classes").on("click",".wc-shipping-class-cancel-edit",(function(t){e(this).closest("tr").remove(),t.preventDefault()})),e("#ship_data").submit((function(t){e(".wkmp-spin-loader").removeClass("wkmp_hide"),e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_add_shipping_class",data:e("#ship_data").serialize(),wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){e(".wkmp-spin-loader").addClass("wkmp_hide"),window.location.href=t.redirect}}),t.preventDefault()})),e(".btn-save-cost").on("click",(function(t){var a=e(this).closest(".shipping-method-add-cost").find("input,select").serialize(),i=e(this).prev().val();e(".wkmp-spin-loader").show(),e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_save_shipping_cost",ship_cost:a,instance_id:i,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){e(".wkmp-spin-loader").hide(),window.location.reload()}}),t.preventDefault()})),e(".wk_del_ship_class").on("click",(function(t){var a=e(this).data("term");e(".wkmp-spin-loader").removeClass("wkmp_hide"),e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_delete_shipping_class","get-term":a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){e(".wkmp-spin-loader").removeClass("wkmp_hide"),window.location.href=t.redirect}}),t.preventDefault()})),e(".wc-shipping-zones").on("click",".wc-shipping-zone-cancel-edit",(function(t){e(this).closest("tr.editing").remove(),t.preventDefault()})),e(".wc-shipping-zones").on("click",".wc-shipping-zone-postcodes-toggle",(function(t){e(this).hide(),e(this).next(".wc-shipping-zone-postcodes").css("display","block"),t.preventDefault()})),e(document).on("focusin","#unused_elm",(function(){e(this).siblings(".live-search-list").slideDown()})),e(document).on("click",".live-search-list li",(function(){e(this).parent(".live-search-list").slideUp();var t=e(this).text().trim(),a=e(this).data("search-term");tag=e('<div class="mp_ship_tags" data-value='+a+">"+t+'<a class="mp_del_tag">x</a></div>'),""===e(this).parent().prev("#mp_set_zone_location").val()?e(this).parent().prev("#mp_set_zone_location").val(e(this).parent().prev("#mp_set_zone_location").val()+a):e(this).parent().prev("#mp_set_zone_location").val(e(this).parent().prev("#mp_set_zone_location").val()+","+a),tag.insertBefore(e(this).parent().siblings("#unused_elm"),e(this).parent().siblings("#unused_elm")),e(this).parent().siblings("#unused_elm").val("")})),e(document).on("click",".mp_del_tag",(function(){var t=e(this).parent().data("value");if(t){var a=e(this).parent().siblings("#mp_set_zone_location").val(),i=t+",",n=","+t;if(-1!==a.indexOf(i))var r=a.replace(t+",","");else r=-1!==a.indexOf(n)?a.replace(","+t,""):a.replace(t,"");e(this).parent().siblings("#mp_set_zone_location").val(r),e(this).parent().remove()}})),e(document).on("keyup",".live-search-box",(function(){var t=e(this).val().toLowerCase().replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}));e(this).siblings(".live-search-list").find("li").each((function(){e(this).is(":contains("+t+")")||t.length<1?e(this).show():e(this).hide()}))})),e(".add-ship-method").on("click",(function(){var t,a;t=e("#add_method_id").data("get-zone"),(a=e("#add_method_id").val())&&t&&(e(".shipping-method-modal .wkmp-spin-loader").show(),e(this).attr("disabled","disabled"),e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_add_shipping_method","zone-id":t,"ship-method":a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){e(".shipping-method-modal .wkmp-spin-loader").hide(),"unauthorized"===t.success&&alert(wkmpObj.wkmp_authorize_error),location.reload()}}))})),e(".del-ship-method").on("click",(function(t){var a,i,n="";a=(n=(n=e(this).data("methid")).split("-"))[0],i=n[1],a&&i&&e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_delete_shipping_method","zone-id":a,"instance-id":i,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(e){e&&t.target.closest("li").remove()}})})),e(".wc-shipping-zone-delete").on("click",(function(t){var a="",i="";confirm(wkmpObj.mkt_tr.ship6)&&(void 0!==(a=e(this)).data("zone-id")&&(i=a.data("zone-id"))&&(e(".wkmp-spin-loader").removeClass("wkmp_hide"),e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_del_zone","zone-id":i,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(t){e(".wkmp-spin-loader").addClass("wkmp_hide"),window.location.href=t.redirect}})),t.preventDefault())})),e("#wkmp-submit-ask-form").on("click",(function(t){t.preventDefault(),e("#wkmp-subject-error").text(""),e("#wkmp-message-error").text("");var a,i="",n=!0;i=e("#wkmp-subject").val(),a=e("#wkmp-message").val(),(i.length<3||i.length>50||!i.match(/^[-_ a-zA-Z0-9]+$/))&&(n=!1,e("#wkmp-subject-error").text(wkmpObj.mkt_tr.mkt40)),(a.length<5||a.length>255)&&(n=!1,e("#wkmp-message-error").text(wkmpObj.mkt_tr.mkt41)),n&&(e("#wkmp-submit-ask-form").prop("disabled",!0),e("#wkmp-seller-sendmail-form").length>0&&e("#wkmp-seller-sendmail-form").submit(),e("#wkmp-seller-query-form").length>0&&e("#wkmp-seller-query-form").submit())})),e(document).on("click","a.upload_var_image_button",(function(t){var a,i=e(this).attr("id"),n="upload_"+i,r="wkmp_variation_product_"+i;t.preventDefault(),a||((a=wp.media.frames.file_frame=wp.media({title:e(this).data("uploader_title"),button:{text:e(this).data("uploader_button_text")},multiple:!1})).on("open",(function(){a.state().get("selection")})),wp.media.query().filterWithIds=function(e){return _(this.models.filter((function(t){return _.contains(e,t.id)})))},a.on("select",(function(){a.state().get("selection").map((function(t){return t=t.toJSON(),e("#"+n).val(t.id),e("#"+r).attr("src",t.sizes.thumbnail.url),t.id}))}))),a.open()})),e(document).ready((function(t){e(".wd-login-title").length>0&&e(".nav.wkmp-role-selector").length>0&&e("input[name=email_2][id=trap]").parent().empty()})),e(document).on("click",".mp_sale_schedule",(function(){e(this).css("display","none"),e(this).siblings(".mp_cancel_sale_schedule").css("display","inline-block"),e(this).parents("tr").siblings(".mp_sale_price_dates_fields").css("display","table-row")})),e(document).on("click",".mp_cancel_sale_schedule",(function(){e(this).css("display","none"),e(this).siblings(".mp_sale_schedule").css("display","inline-block"),e(this).parents("tr").siblings(".mp_sale_price_dates_fields").css("display","none")})),e("body").on("click","#wkmp_product_misc_settings",(function(){e("#wkmp_minimum_order_model").css("display","block")})),e("#wkmp-submit-min-order-amount-update").on("click",(function(t){t.preventDefault();var a=!0,i=e("input[name=_wkmp_minimum_order_amount]");if(i.length>0){var n=e(i).val().trim();parseInt(e(i).attr("data-empty_allow"))<1&&(isNaN(n)||!isNaN(n)&&!(n>0))&&(a=!1,e("#wkmp-amount-error").text(wkmpObj.mkt_tr.mkt42))}var r=e("input[name=_wkmp_max_product_qty_limit]");if(r.length>0){var o=e(r).val();parseInt(e(r).attr("data-empty_allow"))<1&&(isNaN(o)||!isNaN(o)&&!(o>0)||!isNaN(o)&&!function(e){if(!(e=e.trim()))return!1;e=e.replace(/^0+/,"")||"0";var t=Math.floor(Number(e));return t!==1/0&&String(t)===e&&t>=0}(o))&&(a=!1,e("#wkmp-max-qty-limit-error").text(wkmpObj.mkt_tr.mkt47))}a&&(e("#wkmp-amount-error").text(""),e("#wkmp-max-qty-limit-error").text(""),e("form#wkmp-seller-min-order-amount-form").submit())})),e("#wkmp_clear_min_order_amount").on("click",(function(){var t=e("input[name=_wkmp_minimum_order_amount]");parseInt(e(t).attr("data-empty_allow"))>0?(e(t).attr("data-empty_allow",0).attr("readOnly",!1).attr("placeholder",wkmpObj.mkt_tr.mkt43),e(this).text(wkmpObj.mkt_tr.mkt44)):(e(t).attr("data-empty_allow",1).val("").attr("readOnly",!0).attr("placeholder",wkmpObj.mkt_tr.mkt45),e(this).text(wkmpObj.mkt_tr.mkt46),e("#wkmp-amount-error").text(""))})),e("#wkmp_clear_max_qty_limit").on("click",(function(){var t=e("input[name=_wkmp_max_product_qty_limit]");parseInt(e(t).attr("data-empty_allow"))>0?(e(t).attr("data-empty_allow",0).attr("readOnly",!1).attr("placeholder",wkmpObj.mkt_tr.mkt48),e(this).text(wkmpObj.mkt_tr.mkt44)):(e(t).attr("data-empty_allow",1).val("").attr("readOnly",!0).attr("placeholder",wkmpObj.mkt_tr.mkt45),e(this).text(wkmpObj.mkt_tr.mkt46),e("#wkmp-max-qty-limit-error").text(""))})),e("#wk_sold_individual").on("click",(function(){e(this).is(":checked")?e(".wkmp-max-product-qty-limit").hide():e(".wkmp-max-product-qty-limit").show()})),e(".wkmp_delete_seller_product").on("click",(function(){if(confirm(wkmpObj.mkt_tr.fajax0)){var t=e(this),a=t.data("product_id");e(".wkmp-ajax-loader").removeClass("wkmp_hide"),e.ajax({type:"POST",url:wkmpObj.ajax.ajaxUrl,data:{action:"wkmp_delete_seller_product",product_id:a,wkmp_nonce:wkmpObj.ajax.ajaxNonce},success:function(a){!0===a.success?(e(t).closest("tr").remove(),e(".wkmp-ajax-loader").html('<p class="notice success-notice">'+a.message+"</p>"),window.location.reload()):e(".wkmp-ajax-loader").html('<p class="notice error-notice">'+a.message+"</p>"),setTimeout((function(){e(".wkmp-ajax-loader").addClass("wkmp_hide")}),2e3)}})}})),window.history.replaceState&&window.history.replaceState(null,null,window.location.href)}))})();